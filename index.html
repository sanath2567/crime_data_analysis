<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crime Rate Analysis & Public Safety</title>
<link rel="shortcut icon" href="crime-investigation.png" type="image/x-icon">


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

    /* HOME EXTRA SECTIONS */
.home-section {
    padding: 60px 40px;
    background: #ffffff;
}

.home-section.alt {
    background: #f4f6f9;
}

.home-section h2 {
    color: #0b3c5d;
    text-align: center;
    margin-bottom: 20px;
}

.home-section p {
    max-width: 900px;
    margin: auto;
    text-align: center;
    color: #555;
    line-height: 1.6;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
    margin-top: 40px;
}

.feature-box {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.feature-box h3 {
    color: #0b3c5d;
    margin-bottom: 10px;
}

.steps {
    max-width: 900px;
    margin: 40px auto;
}

.step {
    background: white;
    padding: 20px;
    margin-bottom: 15px;
    border-left: 6px solid #2563eb;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
}

.impact-stats {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    margin-top: 40px;
}

.impact-box {
    background: white;
    padding: 25px;
    width: 220px;
    margin: 10px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}


    html, body {
    width: 100%;
    overflow-x: hidden;
}

    body {
  margin: 0;
  padding: 0;
}

body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background-color: #f4f6f9;
}


/* NAVBAR */
nav {
    background-color: #0b3c5d;
    padding: 12px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: nowrap;
    overflow: hidden;
    z-index: 1000;
}

/* keep logo fixed on the left */
.logo {
    display: flex;
    align-items: center;
    gap: 10px;
    flex: 0 0 auto;
}

.logo img {
    height: 40px;
    width: auto;
}

.logo span {
    color: white;
    font-size: 20px;
    font-weight: bold;
}

/* Links container on the right */
.nav-links {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: flex-end;
    flex: 1 1 auto;
    min-width: 0; /* allow overflow handling */
    overflow-x: auto; /* if too many items, allow horizontal scroll */
}

.nav-links a,
.nav-links button {
    color: white;
    text-decoration: none;
    margin: 0 6px;
    font-weight: bold;
    padding: 8px 10px;
    border-radius: 6px;
    background: transparent;
    border: none;
    cursor: pointer;
    white-space: nowrap;
}

.nav-links a:hover,
.nav-links button:hover {
    background: rgba(255,255,255,0.06);
}

/* small helper to center main content and provide consistent width */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    box-sizing: border-box;
}

/* HERO: center content and constrain width */
.hero {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
    url('https://images.unsplash.com/photo-1550439062-609e1531270e');
    background-size: cover;
    color: white;
    width: 100%;
    padding: 80px 40px;
    border-radius: 0;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.hero img {
    height: 70px;
    margin-bottom: 15px;
}

.hero h1, .hero p {
    max-width: 900px;
}

/* ensure nav does not wrap on very small screens; let it scroll */
@media (max-width: 600px) {
    nav { padding: 10px 12px; }
    .nav-links { gap: 8px; }
}

/* wrap nav items into a column on very narrow screens if needed */
@media (max-width: 360px) {
    nav { flex-wrap: wrap; }
    .nav-links { width: 100%; justify-content: flex-start; padding-top: 8px; }
}


/* SECTIONS */
section {
    display: none;
    padding: 40px 0;   /* removes left & right space */
}

section.active {
    display: block;
}

/* HERO */
.hero {
    

    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
    url('https://images.unsplash.com/photo-1550439062-609e1531270e');
    background-size: cover;
    color: white;
    width: 100%;
    padding: 80px 40px;
    border-radius: 0;   /* removes side white gaps */
}


/* STATS */
.stats {
    display: flex;
    justify-content: space-around;
    margin: 40px 0;
    background: white;
    padding: 30px 0;
}


.stat-box h2 {
    color: #0b3c5d;
}
/*about*/
/* ABOUT CARDS */
.about-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.about-card {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
}

.about-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.about-card h3 {
    color: #0b3c5d;
    margin-bottom: 10px;
}

.about-card p {
    font-size: 14px;
    color: #555;
}


/* CONTACT */
.contact-wrapper {
    display: flex;
    gap: 20px;
}

.contact-info {
    flex: 1;
    background: #1f2937;
    color: white;
    padding: 25px;
    border-radius: 8px;
}

.contact-form {
    flex: 1;
    background: white;
    padding: 25px;
    border-radius: 8px;
}

input, textarea, button {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
}

button {
    background-color: #2563eb;
    color: white;
    border: none;
    cursor: pointer;
}
/* FEEDBACK + FAQ SIDE BY SIDE */
.feedback-faq-wrapper {
    display: flex;
    gap: 30px;
    margin-top: 60px;
    flex-wrap: wrap;
}

.feedback-box,
.faq-box {
    flex: 1;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

.feedback-box h2,
.faq-box h2 {
    color: #0b3c5d;
    margin-bottom: 10px;
}

.sub-text {
    color: #6b7280;
    margin-bottom: 20px;
}

/* Feedback inputs */
.feedback-box input,
.feedback-box textarea {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #d1d5db;
}

.feedback-box button {
    background-color: #25eb9f;
    color: white;
    border: none;
    padding: 12px;
    font-weight: bold;
    border-radius: 6px;
    cursor: pointer;
}

.feedback-box button:hover {
    background-color: #1dd8bf;
}

/* FAQ */
.faq-item {
    margin-bottom: 12px;
    border-radius: 6px;
    overflow: hidden;
}

.faq-question {
    background: #25ebc0;
    color: white;
    padding: 14px;
    cursor: pointer;
    font-weight: bold;
}

.faq-answer {
    display: none;
    padding: 14px;
    background: #f9fafb;
    color: #374151;
}

/* MOBILE RESPONSIVE */
@media (max-width: 900px) {
    .feedback-faq-wrapper {
        flex-direction: column;
    }
}

/* FEEDBACK & FAQ */
.feedback-section, .faq-section {
    margin-top: 50px;
}

.feedback-section h2,
.faq-section h2 {
    color: #0b3c5d;
    margin-bottom: 15px;
}

.faq-item {
    background: white;
    border-radius: 6px;
    margin-bottom: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.faq-question {
    padding: 15px;
    cursor: pointer;
    font-weight: bold;
    background: #25baeb;
    color: white;
    border-radius: 6px;
}

.faq-answer {
    display: none;
    padding: 15px;
    color: #444;
    background: #f9fafb;
    border-radius: 0 0 6px 6px;
}


/* FOOTER */
footer {
    background: #1f2937;
    color: white;
    text-align: center;
    padding: 15px;
}
/* DASHBOARD CHART FIX */
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 25px;
    margin-top: 40px;
}

.chart-box {
    background: white;
    padding: 15px;
    border-radius: 10px;
    height: 320px;   /* FIXED HEIGHT */
}

.chart-box canvas {
    width: 100% !important;
    height: 100% !important;
}

</style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<!-- NAVIGATION -->
<nav>
    
    <div class="logo">
    <img src="logo4.png" alt="Crime Analytics Logo">
    <span>Crime Analytics</span>
</div>

    <div class="nav-links">
        <a href="#" onclick="showSection('home')">Home</a>
        <a href="#" onclick="showSection('about')">About</a>
        <a href="#" onclick="showSection('contact')">Contact</a>
        
<a href="userdashboard.html" id="navUserDashboard" style="display:none;">
    User Dashboard
  </a>
  <a href="admindashboard.html" id="adminDashboardLink" style="display:none;">
  Admin Dashboard
</a>

  <button id="logoutBtn" onclick="logout()" style="display:none;">
  Logout
</button>

<a href="login.html" id="loginBtn">Login</a>
    <a href="login.html" id="signupBtn">Signup</a>
    </div>
</nav>


  
  

<!-- HOME -->
<section id="home" class="active">
    <div class="hero">

    <!-- LOGO -->
    <img src="logo4.png" alt="Crime Analytics Logo"
         style="height:70px; margin-bottom:15px;">

    <h1>Crime Rate Analysis & Public Safety</h1>
    <p>Analyze crime trends and enhance public safety using data-driven insights.</p>

</div>


    <div class="stats">
        <div class="stat-box">
            <h2 id="cases">125909</h2>
            <p>Total Crimes Analyzed</p>
        </div>
        <div class="stat-box">
            <h2>2022‚Äì2024</h2>
            <p>Data Coverage</p>
        </div>
        <div class="stat-box">
            <h2>8+</h2>
            <p>States Covered</p>
        </div>
    </div>
    <!--section-1-->
<div class="home-section">
    <h2>Why Crime Analytics Matters</h2>
    <p>
        Crime is not random. Patterns exist across time, location, and behavior.
        Crime Rate Analysis helps authorities move from reactive policing to
        proactive prevention using data-backed intelligence.
    </p>

    <div class="feature-grid">
        <div class="feature-box">
            <h3>üìâ Crime Reduction</h3>
            <p>Identifying repeat patterns helps prevent crimes before they occur.</p>
        </div>
        <div class="feature-box">
            <h3>üöì Smarter Policing</h3>
            <p>Deploy police forces efficiently based on real crime risk.</p>
        </div>
        <div class="feature-box">
            <h3>üß† Data-Driven Decisions</h3>
            <p>Policies are formed using facts, not assumptions.</p>
        </div>
    </div>

</div>
<!--section-2-->
<div class="home-section alt">
    <h2>Core Platform Features</h2>

    <div class="feature-grid">
        <div class="feature-box">
            <h3>üìä Interactive Dashboards</h3>
            <p>Visualize crime data through charts, graphs, and heatmaps.</p>
        </div>

        <div class="feature-box">
            <h3>üó∫Ô∏è Area-Wise Analysis</h3>
            <p>Compare crime rates across cities, districts, and states.</p>
        </div>

        <div class="feature-box">
            <h3>‚è±Ô∏è Time-Based Trends</h3>
            <p>Analyze crimes by year, month, day, and hour.</p>
        </div>

        <div class="feature-box">
            <h3>üîê Secure Data Access</h3>
            <p>Role-based login for admins, officials, and analysts.</p>
        </div>
    </div>
</div>
<!--section-3-->
<div class="home-section">
    <h2>How the System Works</h2>

    <div class="steps">
        <div class="step">
            <strong>Step 1:</strong> Crime data is collected from official sources and records.
        </div>
        <div class="step">
            <strong>Step 2:</strong> Data is cleaned, categorized, and stored securely.
        </div>
        <div class="step">
            <strong>Step 3:</strong> Analytical models detect trends and hotspots.
        </div>
        <div class="step">
            <strong>Step 4:</strong> Dashboards visualize insights for decision-makers.
        </div>
        <div class="step">
            <strong>Step 5:</strong> Authorities take preventive and corrective actions.
        </div>
    </div>
</div>
<!--section-4-->
<div class="home-section alt">
    <h2>Who Uses This Platform</h2>

    <div class="feature-grid">
        <div class="feature-box">
            <h3>üèõÔ∏è Government Agencies</h3>
            <p>For policy planning and public safety governance.</p>
        </div>

        <div class="feature-box">
            <h3>üöî Law Enforcement</h3>
            <p>For crime prevention, patrol planning, and investigations.</p>
        </div>

        <div class="feature-box">
            <h3>üéì Researchers</h3>
            <p>For studying crime behavior and social impact.</p>
        </div>

        <div class="feature-box">
            <h3>üë• Citizens</h3>
            <p>To stay informed about safety trends in their area.</p>
        </div>
    </div>
</div>
<!--section-5-->
<div class="home-section">
    <h2>Public Safety Impact</h2>

    <div class="impact-stats">
        <div class="impact-box">
            <h2>‚Üì 18%</h2>
            <p>Crime Reduction</p>
        </div>

        <div class="impact-box">
            <h2>‚Üë 25%</h2>
            <p>Response Efficiency</p>
        </div>

        <div class="impact-box">
            <h2>90%</h2>
            <p>Data Accuracy</p>
        </div>

        <div class="impact-box">
            <h2>24/7</h2>
            <p>Monitoring</p>
        </div>
    </div>
</div>
</section>





<!-- ABOUT -->
<!-- ABOUT -->
<section id="about">

    <!-- ABOUT SUB NAV -->
    <div class="about-nav container">
        <button onclick="showAboutTab('about-overview')" class="active">Overview</button>
        <button onclick="showAboutTab('about-mission')">Mission & Vision</button>
        <button onclick="showAboutTab('about-tech')">Technology & Data</button>
    </div>

    <!-- ‚úÖ STEP 2: WRAPPER FOR YOUR EXISTING CONTENT -->
    <div id="about-overview" class="about-tab active container">
        <div id="about-mission" class="about-tab">

    <h1>üéØ Mission & Vision</h1>

    <h2>Our Mission</h2>
    <p>
        To empower government bodies, law enforcement agencies, and citizens
        with reliable crime intelligence that enables proactive crime prevention
        and safer communities.
    </p>

    <div class="about-cards">
        <div class="about-card">
            <h3>üõ°Ô∏è Public Safety</h3>
            <p>Reduce crime impact through early detection and prevention.</p>
        </div>

        <div class="about-card">
            <h3>üìä Data Accuracy</h3>
            <p>Ensure reliable and verified crime analytics for decision-making.</p>
        </div>

        <div class="about-card">
            <h3>ü§ù Community Trust</h3>
            <p>Increase transparency between citizens and authorities.</p>
        </div>
    </div>


    <h2 style="margin-top:30px;">Our Vision</h2>
    <p>
        To build a data-driven governance ecosystem where crime is anticipated,
        controlled, and minimized using modern analytics and technology.
    </p>

</div>
<div id="about-tech" class="about-tab">

    <h1>üß† Technology & Data</h1>

    <h2>Technology Stack</h2>

    <div class="about-cards">
        <div class="about-card">
            <h3>Frontend</h3>
            <p>HTML5, CSS3, JavaScript, Chart.js</p>
        </div>

        <div class="about-card">
            <h3>Backend</h3>
            <p>Firebase Authentication & Firestore</p>
        </div>

        <div class="about-card">
            <h3>Analytics</h3>
            <p>Trend analysis, hotspot detection, predictive insights</p>
        </div>

        <div class="about-card">
            <h3>Security</h3>
            <p>Role-based access, encrypted storage, secure APIs</p>
        </div>
    </div>

    <h2 style="margin-top:30px;">Data Sources</h2>
    <ul style="max-width:800px; margin:auto; line-height:1.8;">
        <li>National Crime Records Bureau (NCRB)</li>
        <li>State Police & Law Enforcement Reports</li>
        <li>Government Open Data Portals</li>
        <li>Historical Crime Databases</li>
    </ul>

</div>



        <!-- üîΩ YOUR OLD CONTENT (UNCHANGED) -->
        <h1>About Crime Rate Analysis & Public Safety</h1>
        <p>
            Our platform empowers governments, law enforcement agencies, and researchers
            with data-driven tools to understand crime patterns and enhance public safety.
        </p>

        <div class="about-cards">

            <div class="about-card">
                <h3>üìä Crime Data Analysis</h3>
                <p>
                    Analyze large-scale crime datasets to identify trends, patterns,
                    and seasonal crime fluctuations across regions.
                </p>
                <ul>
                    <li>Studying past crime records helps understand how crime changes over time</li>
                    <li>Comparing crime data across regions reveals high-risk and low-risk areas</li>
                    <li>Analyzing time patterns shows when crimes are more likely to occur</li>
                    <li>Visualization makes complex crime data easy to understand</li>
                </ul>
            </div>

            <div class="about-card">
                <h3>üìç Hotspot Identification</h3>
                <p>
                    Detect high-risk crime zones using historical data to support
                    strategic policing and resource allocation.
                </p>
                <ul>
                    <li>Identifies areas with consistently high crime occurrences</li>
                    <li>Uses historical crime data to detect recurring patterns</li>
                    <li>Highlights time-based crime concentration</li>
                    <li>Enhances community awareness in high-risk locations</li>
                </ul>
            </div>

            <div class="about-card">
                <h3>üîÆ Predictive Insights</h3>
                <p>
                    Use predictive analytics to forecast potential crime risks.
                </p>
                <ul>
                    <li>Predict future crime probabilities</li>
                    <li>Detect seasonal and event-based crime patterns</li>
                    <li>Support preventive planning</li>
                </ul>
            </div>

            <div class="about-card">
                <h3>üèõÔ∏è Policy & Public Safety</h3>
                <p>
                    Support data-backed policymaking and safety strategies.
                </p>
                <ul>
                    <li>Evidence-based governance</li>
                    <li>Optimized police deployment</li>
                    <li>Safer urban planning</li>
                </ul>
            </div>

        </div>
        <!-- üîº YOUR OLD CONTENT ENDS -->

    </div>

    <!-- STEP 3 CONTENT WILL GO HERE (NEXT STEP) -->

</section>



<!-- CONTACT -->
<section id="contact">
  <div class="container">

    <h1>Contact Us</h1>

    <div class="contact-wrapper">

        <!-- Contact Information -->
        <div class="contact-info">
            <h2>Get in Touch</h2>
            <p>
                Crime Rate Analysis & Public Safety Center<br>
                Data Analytics & Research Division
            </p>

            <p>
                <strong>Address:</strong><br>
                Hyderabad, Telangana ‚Äì 500081, India
            </p>

            <p>
                <strong>Email:</strong><br>
                support@crimesafetyanalysis.in<br>
                research@crimesafetyanalysis.in
            </p>

            <p>
                <strong>Phone:</strong><br>
                +91 90000 12345
            </p>

            <p>
                <strong>Working Hours:</strong><br>
                Mon ‚Äì Fri | 9:30 AM ‚Äì 5:30 PM
            </p>
        </div>

        <!-- Contact Form -->
        <div class="contact-form">
            <h2>Send Us a Message</h2>
            <form onsubmit="submitForm(event)">
                <input type="text" id="name" placeholder="Your Name" required>
                <input type="email" id="email" placeholder="Your Email" required>
                <input type="text" id="subject" placeholder="Subject" required>
                <textarea id="message" rows="5" placeholder="Your Message" required></textarea>
                <button type="submit">Submit</button>
            </form>
        </div>

    </div>
  </div>
 
</div>
<!-- FEEDBACK + FAQ WRAPPER -->
<div class="feedback-faq-wrapper">

  <!-- FEEDBACK BOX -->
  <div class="feedback-box">
    <h2>Public Feedback</h2>
    <p class="sub-text">
      Help us improve crime prevention tools by sharing your feedback.
    </p>

    <form onsubmit="submitFeedback(event)">
      <input type="text" id="fb-name" placeholder="Your Name" required>
      <input type="email" id="fb-email" placeholder="Your Email" required>
      <textarea id="fb-message" rows="5" placeholder="Your Feedback / Suggestions" required></textarea>
      <button type="submit">Submit Feedback</button>
    </form>
  </div>

  <!-- FAQ BOX -->
  <div class="faq-box">
    <h2>Frequently Asked Questions</h2>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        What is Crime Rate Analysis?
      </div>
      <div class="faq-answer">
        Crime Rate Analysis uses historical crime data to identify trends,
        hotspots, and patterns to improve public safety.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        Is the crime data reliable?
      </div>
      <div class="faq-answer">
        Yes. We collect data from verified government and law-enforcement sources.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        Can citizens access crime statistics?
      </div>
      <div class="faq-answer">
        Yes. Public dashboards provide access to state-wise and time-based crime data.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        How does this platform improve public safety?
      </div>
      <div class="faq-answer">
        By predicting crime risks and identifying hotspots early for proactive action.
      </div>
    </div>
  </div>

</div>

</section>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
(function () {
    emailjs.init("dTsUtOilfwZS1QsCN"); // ‚úÖ Your PUBLIC KEY
})();

function submitForm(event) {
    event.preventDefault();

    const templateParams = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        subject: document.getElementById("subject").value,
        message: document.getElementById("message").value
    };

    emailjs.send(
        "service_0s55cg9",     // ‚úÖ Service ID
        "template_2sif9ec",    // ‚úÖ Template ID
        templateParams
    )
    .then(function () {
        alert("‚úÖ Message sent successfully!");
        document.querySelector(".contact-form form").reset();
    })
    .catch(function (error) {
        alert("‚ùå Failed to send message");
        console.error("EmailJS Error:", error);
    });
}
</script>

<script>
  showSection('home');
</script>



<footer>
    ¬© 2025 Crime Rate Analysis & Public Safety
</footer>

<script>
function showSection(id) {
    document.querySelectorAll("section").forEach(sec => {
        sec.classList.remove("active");
    });

    document.getElementById(id).classList.add("active");

    // Load charts ONLY when dashboard opens
    
}
</script>
<script>

        
</script>
<script>
function toggleFaq(element) {
    const answer = element.nextElementSibling;
    answer.style.display = answer.style.display === "block" ? "none" : "block";
}


</script>


  


  <!-- üî• Firebase Connection Code (STEP 5) -->
  <script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

import { 
  getAuth, 
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import { 
  getFirestore, 
  collection, 
  addDoc, 
  serverTimestamp,
  getDoc,
  doc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA3gQMnJh0L8Bc6CNRJ_oTh6xqabVP2-P4",
  authDomain: "crime-rate-anaylsis.firebaseapp.com",
  projectId: "crime-rate-anaylsis",
  storageBucket: "crime-rate-anaylsis.firebasestorage.app",
  messagingSenderId: "640438558864",
  appId: "1:640438558864:web:42745954d83ea46cecf815"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ‚úÖ LOGOUT */
// ‚úÖ STEP 4: LOGOUT (CORRECT FUNCTION NAME)
window.logout = async function () {
  try {
    await signOut(auth);
    localStorage.clear();
    window.location.href = "login.html";
  } catch (error) {
    console.error("Logout error:", error);
  }
};


/* ‚úÖ FEEDBACK */
window.submitFeedback = async function (event) {
  event.preventDefault();

  const name = document.getElementById("fb-name").value;
  const email = document.getElementById("fb-email").value;
  const message = document.getElementById("fb-message").value;

  await addDoc(collection(db, "publicFeedback"), {
    name,
    email,
    message,
    createdAt: serverTimestamp()
  });

  alert("‚úÖ Feedback submitted successfully!");
  event.target.reset();
};
</script>

<script>
onAuthStateChanged(auth, async (user) => {

  // NAV ELEMENTS
  const loginBtn = document.getElementById("loginBtn");
  const signupBtn = document.getElementById("signupBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const userDash = document.getElementById("navUserDashboard");
  const adminDash = document.getElementById("adminDashboardLink");

  // RESET (important)
  loginBtn.style.display = "inline-block";
  signupBtn.style.display = "inline-block";
  logoutBtn.style.display = "none";
  userDash.style.display = "none";
  adminDash.style.display = "none";

  // NOT logged in
  if (!user) return;

  // Logged in ‚Üí hide login/signup
  loginBtn.style.display = "none";
  signupBtn.style.display = "none";
  logoutBtn.style.display = "inline-block";

  // Role check
  const snap = await getDoc(doc(db, "users", user.uid));
  const role = snap.data().role;

  if (role === "admin") {
    adminDash.style.display = "inline-block";
  } else {
    userDash.style.display = "inline-block";
  }
});
</script>


</body>
</html>

